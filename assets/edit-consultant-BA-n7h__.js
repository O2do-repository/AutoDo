import{h as f,j as c,a5 as _,O as T,k as E,o as V,i as y,w as r,f as a,n as v,a6 as P,a7 as k,V as q}from"./index-DpfJGovt.js";import{G as B}from"./GoBackBtn-CHuisdI7.js";import{V as N,a as S,b as j,c as z}from"./VCard-Cf2JM-6m.js";import{V as O,a as u}from"./VRow-DQdqFku1.js";import{V as n}from"./VTextField-BKXVHx61.js";import{V as R}from"./VSwitch-C9r0bOwj.js";import{V as M}from"./VSelect-DIBHyOw-.js";import{V as $}from"./forwardRefs-CdZyDlBA.js";const i="https://static.vecteezy.com/system/resources/thumbnails/003/337/584/small/default-avatar-photo-placeholder-profile-icon-vector.jpg",A=f({__name:"UpdateConsultant",setup(C){const e=c({email:"",availabilityDate:"",expirationDateCI:"",intern:!1,name:"",surname:"",enterprise:null,phone:"",copyCI:"",picture:""}),p=_(),b=[{id:"0",name:"O2do"},{id:"1",name:"Winch"},{id:"2",name:"MI6"}],s=t=>t!=null&&t!==""||"Champ obligatoire",x=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||"E-mail invalide",I=t=>/^[0-9]{10}$/.test(t)||"Numéro de téléphone invalide (10 chiffres)",g=t=>!!t||"Veuillez choisir une date",d=c(i),m=()=>{if(!e.value.picture||e.value.picture.trim()===""){d.value=i;return}const t=new Image;t.src=e.value.picture,t.onload=()=>{d.value=e.value.picture},t.onerror=()=>{d.value=i}},h=()=>{e.value.picture===i&&(e.value.picture="")},D=()=>{e.value.picture||(e.value.picture=i)},U=()=>{d.value=i};T(()=>e.value.picture,m);const w=async()=>{try{if((!e.value.picture||e.value.picture.trim()==="")&&(e.value.picture=i),!(await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/consultant",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.value)})).ok)throw new Error("Erreur lors de la modification du consultant");setTimeout(()=>{p.push("/consultant/list-consultant")},1e3)}catch(t){console.error(t instanceof Error?t.message:"Une erreur est survenue")}};return E(()=>{const t=sessionStorage.getItem("editConsultant");if(t){const l=JSON.parse(t);l.expirationDateCI&&(l.expirationDateCI=l.expirationDateCI.split("T")[0]),l.availabilityDate&&(l.availabilityDate=l.availabilityDate.split("T")[0]),Object.assign(e.value,l),m()}}),(t,l)=>(V(),y(q,null,{default:r(()=>[a(N,{class:"pa-4"},{default:r(()=>[a(B,{class:"mb-4"}),a(S,{class:"text-h5 font-weight-bold"},{default:r(()=>l[10]||(l[10]=[v("Modifier Consultant")])),_:1}),a(j,null,{default:r(()=>[a(O,null,{default:r(()=>[a(u,{cols:"12",class:"d-flex flex-column align-center"},{default:r(()=>[a(P,{size:"150"},{default:r(()=>[a(k,{src:d.value,alt:"Photo Consultant",contain:"",onError:U},null,8,["src"])]),_:1})]),_:1}),a(u,{cols:"12"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Lien Photo *",modelValue:e.value.picture,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.picture=o),placeholder:i,onFocus:h,onBlur:D,onInput:m},null,8,["modelValue"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Nom *",modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.name=o),rules:[s],required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Prénom *",modelValue:e.value.surname,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.surname=o),rules:[s],required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Lien Copie CI *",modelValue:e.value.copyCI,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.copyCI=o),rules:[s],required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Expiration CI *",modelValue:e.value.expirationDateCI,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.expirationDateCI=o),type:"date"},null,8,["modelValue"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(R,{variant:"outlined",color:"primary",label:"Stagiaire *",modelValue:e.value.intern,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.intern=o)},null,8,["modelValue"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(M,{label:"Entreprise *",modelValue:e.value.enterprise,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.enterprise=o),items:b,"item-title":"name","item-value":"id",rules:[s],variant:"outlined",color:"primary"},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Email *",modelValue:e.value.email,"onUpdate:modelValue":l[7]||(l[7]=o=>e.value.email=o),rules:[s,x],required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Téléphone *",modelValue:e.value.phone,"onUpdate:modelValue":l[8]||(l[8]=o=>e.value.phone=o),rules:[s,I],required:""},null,8,["modelValue","rules"])]),_:1}),a(u,{cols:"6"},{default:r(()=>[a(n,{variant:"outlined",color:"primary",label:"Date de disponibilité *",modelValue:e.value.availabilityDate,"onUpdate:modelValue":l[9]||(l[9]=o=>e.value.availabilityDate=o),type:"date",rules:[g],required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),a(z,{class:"d-flex justify-end"},{default:r(()=>[a($,{color:"primary",onClick:w},{default:r(()=>l[11]||(l[11]=[v("Modifier")])),_:1})]),_:1})]),_:1})]),_:1}))}}),X=f({__name:"edit-consultant",setup(C){return(e,p)=>(V(),y(A))}});export{X as default};
