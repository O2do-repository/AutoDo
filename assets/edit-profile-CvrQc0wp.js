import{h as f,j as V,v as C,o as p,i as v,w as a,f as r,n as d,t as T,q as U,V as g}from"./index-Cz8dIHak.js";import{G as w}from"./GoBackBtn-CtgXFm15.js";import{V as P}from"./VAlert-CpyW0e_K.js";import{V as S,a as j,b as q,c as L}from"./VCard-DjH9YsHY.js";import{V as s,a as m}from"./VSelect-DFfWMbxb.js";import{V as N}from"./forwardRefs-BjVr3qn7.js";const B=f({__name:"UpdateProfile",setup(c){const i=localStorage.getItem("selectedProfile"),e=V(i?JSON.parse(i):{profileUuid:"",rateHour:null,cv:"",cvDate:"",jobTitle:"",experienceLevel:"",skills:[],keywords:[]});console.log("Profil après parsing :",e.value);const n=C(),b=["Junior","Medior","Senior"],x=["C#","ASP.NET","Vue.js","SQL"],y=["Backend","Frontend","API"],t=V(null),k=async()=>{if(t.value=null,!e.value.jobTitle||!e.value.cv||!e.value.cvDate||!e.value.experienceLevel){t.value="Veuillez remplir tous les champs obligatoires.";return}try{if(!(await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/profil",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.value)})).ok)throw new Error("Erreur lors de la mise à jour du profil");setTimeout(()=>{n.go(-1)},1e3)}catch(u){console.error(u instanceof Error?u.message:"Une erreur est survenue")}};return(u,l)=>(p(),v(g,null,{default:a(()=>[r(w),t.value?(p(),v(P,{key:0,closable:"",type:"error",variant:"outlined"},{default:a(()=>[d(T(t.value),1)]),_:1})):U("",!0),r(S,{class:"pa-4"},{default:a(()=>[r(j,null,{default:a(()=>l[8]||(l[8]=[d("Modifier Profil")])),_:1}),r(q,null,{default:a(()=>[r(s,{label:"Job Title*",modelValue:e.value.jobTitle,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.jobTitle=o),required:""},null,8,["modelValue"]),r(m,{label:"Niveau d'expérience",modelValue:e.value.experienceLevel,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.experienceLevel=o),items:b,required:""},null,8,["modelValue"]),r(s,{label:"Tarif / heure",modelValue:e.value.rateHour,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.rateHour=o),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),r(s,{label:"CV URL*",modelValue:e.value.cv,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.cv=o),required:""},null,8,["modelValue"]),r(s,{label:"Date CV*",modelValue:e.value.cvDate,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.cvDate=o),type:"datetime-local",required:""},null,8,["modelValue"]),r(m,{label:"Compétences",modelValue:e.value.skills,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.skills=o),items:x,multiple:"",required:""},null,8,["modelValue"]),r(m,{label:"Mots-clés",modelValue:e.value.keywords,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.keywords=o),items:y,multiple:"",required:""},null,8,["modelValue"])]),_:1}),r(L,null,{default:a(()=>[r(N,{color:"primary",onClick:l[7]||(l[7]=o=>k())},{default:a(()=>l[9]||(l[9]=[d("Publier")])),_:1})]),_:1})]),_:1})]),_:1}))}}),z=f({__name:"edit-profile",setup(c){return(i,e)=>{const n=B;return p(),v(n)}}});export{z as default};
