import{m as D,b as z,c as w,f as R,d as K,e as Q,g as X,h as Z}from"./forwardRefs-DzoXtlxl.js";import{p as I,g as N,A as _,M as F,j as S,N as q,I as J,x as T,e as M,E as k,f as d,G as O,O as p,P as U,Q as ee,R as te,S as ae,T as ne,U as oe,W as le,X as se,Y as C,Z as re,$ as ie,k as ce,a0 as ue,B as ve,a1 as fe,a2 as me,a3 as de,c as ge,a4 as be}from"./index-Bkgs0Zah.js";const he=I({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...D({origin:"center center",scrollStrategy:"block",transition:{component:z},zIndex:2400})},"VDialog"),Ee=N()({name:"VDialog",props:he(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,u){let{emit:a,slots:t}=u;const v=_(e,"modelValue"),{scopeId:h}=F(),n=S();function g(o){var i,c;const s=o.relatedTarget,f=o.target;if(s!==f&&((i=n.value)!=null&&i.contentEl)&&((c=n.value)!=null&&c.globalTop)&&![document,n.value.contentEl].includes(f)&&!n.value.contentEl.contains(f)){const r=p(n.value.contentEl);if(!r.length)return;const m=r[0],x=r[r.length-1];s===m?x.focus():m.focus()}}q(()=>{document.removeEventListener("focusin",g)}),J&&T(()=>v.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",g):document.removeEventListener("focusin",g)},{immediate:!0});function b(){var o;a("afterEnter"),(o=n.value)!=null&&o.contentEl&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function y(){a("afterLeave")}return T(v,async o=>{var s;o||(await U(),(s=n.value.activatorEl)==null||s.focus({preventScroll:!0}))}),M(()=>{const o=w.filterProps(e),s=k({"aria-haspopup":"dialog"},e.activatorProps),f=k({tabindex:-1},e.contentProps);return d(w,k({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:v.value,"onUpdate:modelValue":i=>v.value=i,"aria-modal":"true",activatorProps:s,contentProps:f,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:y},h),{activator:t.activator,default:function(){for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return d(O,{root:"VDialog"},{default:()=>{var m;return[(m=t.default)==null?void 0:m.call(t,...c)]}})}})}),R({},n)}});function ye(e){const u=C(e());let a=-1;function t(){clearInterval(a)}function v(){t(),U(()=>u.value=e())}function h(n){const g=n?getComputedStyle(n):{transitionDuration:.2},b=parseFloat(g.transitionDuration)*1e3||200;if(t(),u.value<=0)return;const y=performance.now();a=window.setInterval(()=>{const o=performance.now()-y+b;u.value=Math.max(e()-o,0),u.value<=0&&t()},b)}return me(t),{clear:t,time:u,start:h,reset:v}}const Pe=I({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...K({location:"bottom"}),...Q(),...ee(),...te(),...ae(),...ne(D({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Se=N()({name:"VSnackbar",props:Pe(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:a}=u;const t=_(e,"modelValue"),{positionClasses:v}=X(e),{scopeId:h}=F(),{themeClasses:n}=oe(e),{colorClasses:g,colorStyles:b,variantClasses:y}=le(e),{roundedClasses:o}=se(e),s=ye(()=>Number(e.timeout)),f=S(),i=S(),c=C(!1),r=C(0),m=S(),x=re(de,void 0);ie(()=>!!x,()=>{const l=ge();be(()=>{m.value=l.mainStyles.value})}),T(t,V),T(()=>e.timeout,V),ce(()=>{t.value&&V()});let L=-1;function V(){s.reset(),window.clearTimeout(L);const l=Number(e.timeout);if(!t.value||l===-1)return;const P=ue(i.value);s.start(P),L=window.setTimeout(()=>{t.value=!1},l)}function W(){s.reset(),window.clearTimeout(L)}function Y(){c.value=!0,W()}function A(){c.value=!1,V()}function H(l){r.value=l.touches[0].clientY}function j(l){Math.abs(r.value-l.changedTouches[0].clientY)>50&&(t.value=!1)}function G(){c.value&&A()}const $=ve(()=>e.location.split(" ").reduce((l,P)=>(l[`v-snackbar--${P}`]=!0,l),{}));return M(()=>{const l=w.filterProps(e),P=!!(a.default||a.text||e.text);return d(w,k({ref:f,class:["v-snackbar",{"v-snackbar--active":t.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},$.value,v.value,e.class],style:[m.value,e.style]},l,{modelValue:t.value,"onUpdate:modelValue":E=>t.value=E,contentProps:k({class:["v-snackbar__wrapper",n.value,g.value,o.value,y.value],style:[b.value],onPointerenter:Y,onPointerleave:A},l.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:H,onTouchend:j,onAfterLeave:G},h),{default:()=>{var E,B;return[fe(!1,"v-snackbar"),e.timer&&!c.value&&d("div",{key:"timer",class:"v-snackbar__timer"},[d(Z,{ref:i,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":s.time.value},null)]),P&&d("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((E=a.text)==null?void 0:E.call(a))??e.text,(B=a.default)==null?void 0:B.call(a)]),a.actions&&d(O,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[d("div",{class:"v-snackbar__actions"},[a.actions({isActive:t})])]})]},activator:a.activator})}),R({},f)}});export{Ee as V,Se as a};
