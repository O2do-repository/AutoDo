import{i as B,j as z,k as E,f as R,l as J,n as $,o as q,p as Q}from"./forwardRefs-DY4yVjJ7.js";import{p as I,g as N,T as _,a2 as F,j as w,ae as X,a8 as Z,O as T,e as O,H as P,f as d,ab as j,af as p,Y as H,ag as ee,ah as te,J as ae,D as ne,K as oe,ai as le,aj as se,N as C,S as re,ak as ie,k as ce,al as ue,G as ve,am as fe,an as me,ao as de,c as ge,ap as be}from"./index-E_FGR8gk.js";const he=I({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...B({origin:"center center",scrollStrategy:"block",transition:{component:z},zIndex:2400})},"VDialog"),Se=N()({name:"VDialog",props:he(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,u){let{emit:a,slots:t}=u;const v=_(e,"modelValue"),{scopeId:h}=F(),n=w();function g(o){var i,c;const s=o.relatedTarget,f=o.target;if(s!==f&&((i=n.value)!=null&&i.contentEl)&&((c=n.value)!=null&&c.globalTop)&&![document,n.value.contentEl].includes(f)&&!n.value.contentEl.contains(f)){const r=p(n.value.contentEl);if(!r.length)return;const m=r[0],x=r[r.length-1];s===m?x.focus():m.focus()}}X(()=>{document.removeEventListener("focusin",g)}),Z&&T(()=>v.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",g):document.removeEventListener("focusin",g)},{immediate:!0});function b(){var o;a("afterEnter"),(o=n.value)!=null&&o.contentEl&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function k(){a("afterLeave")}return T(v,async o=>{var s;o||(await H(),(s=n.value.activatorEl)==null||s.focus({preventScroll:!0}))}),O(()=>{const o=E.filterProps(e),s=P({"aria-haspopup":"dialog"},e.activatorProps),f=P({tabindex:-1},e.contentProps);return d(E,P({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:v.value,"onUpdate:modelValue":i=>v.value=i,"aria-modal":"true",activatorProps:s,contentProps:f,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:k},h),{activator:t.activator,default:function(){for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return d(j,{root:"VDialog"},{default:()=>{var m;return[(m=t.default)==null?void 0:m.call(t,...c)]}})}})}),R({},n)}});function ke(e){const u=C(e());let a=-1;function t(){clearInterval(a)}function v(){t(),H(()=>u.value=e())}function h(n){const g=n?getComputedStyle(n):{transitionDuration:.2},b=parseFloat(g.transitionDuration)*1e3||200;if(t(),u.value<=0)return;const k=performance.now();a=window.setInterval(()=>{const o=performance.now()-k+b;u.value=Math.max(e()-o,0),u.value<=0&&t()},b)}return me(t),{clear:t,time:u,start:h,reset:v}}const ye=I({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...J({location:"bottom"}),...$(),...ee(),...te(),...ae(),...ne(B({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),we=N()({name:"VSnackbar",props:ye(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:a}=u;const t=_(e,"modelValue"),{positionClasses:v}=q(e),{scopeId:h}=F(),{themeClasses:n}=oe(e),{colorClasses:g,colorStyles:b,variantClasses:k}=le(e),{roundedClasses:o}=se(e),s=ke(()=>Number(e.timeout)),f=w(),i=w(),c=C(!1),r=C(0),m=w(),x=re(de,void 0);ie(()=>!!x,()=>{const l=ge();be(()=>{m.value=l.mainStyles.value})}),T(t,V),T(()=>e.timeout,V),ce(()=>{t.value&&V()});let L=-1;function V(){s.reset(),window.clearTimeout(L);const l=Number(e.timeout);if(!t.value||l===-1)return;const y=ue(i.value);s.start(y),L=window.setTimeout(()=>{t.value=!1},l)}function M(){s.reset(),window.clearTimeout(L)}function Y(){c.value=!0,M()}function A(){c.value=!1,V()}function U(l){r.value=l.touches[0].clientY}function W(l){Math.abs(r.value-l.changedTouches[0].clientY)>50&&(t.value=!1)}function G(){c.value&&A()}const K=ve(()=>e.location.split(" ").reduce((l,y)=>(l[`v-snackbar--${y}`]=!0,l),{}));return O(()=>{const l=E.filterProps(e),y=!!(a.default||a.text||e.text);return d(E,P({ref:f,class:["v-snackbar",{"v-snackbar--active":t.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},K.value,v.value,e.class],style:[m.value,e.style]},l,{modelValue:t.value,"onUpdate:modelValue":S=>t.value=S,contentProps:P({class:["v-snackbar__wrapper",n.value,g.value,o.value,k.value],style:[b.value],onPointerenter:Y,onPointerleave:A},l.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:U,onTouchend:W,onAfterLeave:G},h),{default:()=>{var S,D;return[fe(!1,"v-snackbar"),e.timer&&!c.value&&d("div",{key:"timer",class:"v-snackbar__timer"},[d(Q,{ref:i,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":s.time.value},null)]),y&&d("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((S=a.text)==null?void 0:S.call(a))??e.text,(D=a.default)==null?void 0:D.call(a)]),a.actions&&d(j,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[d("div",{class:"v-snackbar__actions"},[a.actions({isActive:t})])]})]},activator:a.activator})}),R({},f)}});export{Se as V,we as a};
