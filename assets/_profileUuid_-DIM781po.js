import{h as b,j as V,v as T,o as p,i as m,w as a,n,t as U,q as k,f as r,V as g,x as w,y as P}from"./index-CjQAxy-L.js";import{V as S}from"./VAlert-IV44Bnfu.js";import{a as j,b as q,c as L,V as N}from"./VCard-BuPE2Xvi.js";import{V as s,a as d,b as D}from"./VSelect-B1Ofjcy2.js";const I=b({__name:"UpdateProfile",setup(c){const i=localStorage.getItem("selectedProfile"),e=V(i?JSON.parse(i):{profileUuid:"",rateHour:null,cv:"",cvDate:"",jobTitle:"",experienceLevel:"",skills:[],keywords:[]});console.log("Profil après parsing :",e.value);const v=T(),f=["Junior","Medior","Senior"],x=["C#","ASP.NET","Vue.js","SQL"],y=["Backend","Frontend","API"],t=V(null),C=async()=>{if(t.value=null,!e.value.jobTitle||!e.value.cv||!e.value.cvDate||!e.value.experienceLevel){t.value="Veuillez remplir tous les champs obligatoires.";return}try{if(!(await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/profil",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.value)})).ok)throw new Error("Erreur lors de la mise à jour du profil");setTimeout(()=>{v.push("/table-profile")},1e3)}catch(u){console.error(u instanceof Error?u.message:"Une erreur est survenue")}};return(u,l)=>(p(),m(g,null,{default:a(()=>[t.value?(p(),m(S,{key:0,closable:"",type:"error",variant:"outlined"},{default:a(()=>[n(U(t.value),1)]),_:1})):k("",!0),r(N,{class:"pa-4"},{default:a(()=>[r(j,null,{default:a(()=>l[8]||(l[8]=[n("Modifier Profil")])),_:1}),r(q,null,{default:a(()=>[r(s,{label:"Job Title*",modelValue:e.value.jobTitle,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.jobTitle=o),required:""},null,8,["modelValue"]),r(d,{label:"Niveau d'expérience",modelValue:e.value.experienceLevel,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.experienceLevel=o),items:f,required:""},null,8,["modelValue"]),r(s,{label:"Tarif / heure",modelValue:e.value.rateHour,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.rateHour=o),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),r(s,{label:"CV URL*",modelValue:e.value.cv,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.cv=o),required:""},null,8,["modelValue"]),r(s,{label:"Date CV*",modelValue:e.value.cvDate,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.cvDate=o),type:"datetime-local",required:""},null,8,["modelValue"]),r(d,{label:"Compétences",modelValue:e.value.skills,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.skills=o),items:x,multiple:"",required:""},null,8,["modelValue"]),r(d,{label:"Mots-clés",modelValue:e.value.keywords,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.keywords=o),items:y,multiple:"",required:""},null,8,["modelValue"])]),_:1}),r(L,null,{default:a(()=>[r(D,{color:"primary",onClick:l[7]||(l[7]=o=>C())},{default:a(()=>l[9]||(l[9]=[n("Publier")])),_:1})]),_:1})]),_:1})]),_:1}))}}),J=b({__name:"[profileUuid]",setup(c){const e=w().params.profileUuid;return(v,f)=>(p(),m(I,{profileId:P(e)},null,8,["profileId"]))}});export{J as default};
