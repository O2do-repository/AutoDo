import{h as f,j as c,v as U,x as _,o as V,i as y,w as o,f as l,n as v,y as N,z as S,V as T}from"./index-Bkgs0Zah.js";import{G as q}from"./GoBackBtn-Cd88gvsu.js";import{V as D,a as k,b as z,c as A}from"./VCard-DbOxVaLs.js";import{V as B,a as u}from"./VRow-DoNrGYXq.js";import{V as n,a as j}from"./VSelect-yJoDpOm4.js";import{V as R}from"./VSwitch-DjsxtCfr.js";import{V as $}from"./forwardRefs-DzoXtlxl.js";const i="https://static.vecteezy.com/system/resources/thumbnails/003/337/584/small/default-avatar-photo-placeholder-profile-icon-vector.jpg",O=f({__name:"AddConsultant",setup(C){const e=c({Email:"",AvailabilityDate:"",ExpirationDateCI:"",Intern:!1,Name:"",Surname:"",enterprise:null,Phone:"",CopyCI:"",Picture:""}),m=U(),P=[{id:0,name:"O2do"},{id:1,name:"Winch"},{id:2,name:"MI6"}],s=r=>r!=null&&r!==""||"Champ obligatoire",b=r=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||"E-mail invalide",x=r=>/^[0-9]{10}$/.test(r)||"Numéro de téléphone invalide (10 chiffres)",I=r=>!!r||"Veuillez choisir une date",d=c(i),p=()=>{if(!e.value.Picture||e.value.Picture.trim()===""){d.value=i;return}const r=new Image;r.src=e.value.Picture,r.onload=()=>{d.value=e.value.Picture},r.onerror=()=>{d.value=i}},g=()=>{e.value.Picture===i&&(e.value.Picture="")},E=()=>{e.value.Picture||(e.value.Picture=i)},h=()=>{d.value=i};_(()=>e.value.Picture,p);const w=async()=>{try{if((!e.value.Picture||e.value.Picture.trim()==="")&&(e.value.Picture=i),!(await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/consultant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.value)})).ok)throw new Error("Erreur lors de l'ajout du consultant");setTimeout(()=>{m.push("/consultant/list-consultant")},1e3)}catch(r){console.error(r instanceof Error?r.message:"Une erreur est survenue")}};return(r,a)=>(V(),y(T,null,{default:o(()=>[l(D,{class:"pa-4"},{default:o(()=>[l(q,{class:"mb-4"}),l(k,{class:"text-h5 font-weight-bold"},{default:o(()=>a[10]||(a[10]=[v("Nouveau Consultant")])),_:1}),l(z,null,{default:o(()=>[l(B,null,{default:o(()=>[l(u,{cols:"12",class:"d-flex flex-column align-center"},{default:o(()=>[l(N,{size:"150"},{default:o(()=>[l(S,{src:d.value,alt:"Photo Consultant",contain:"",onError:h},null,8,["src"])]),_:1})]),_:1}),l(u,{cols:"12"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Lien Photo *",modelValue:e.value.Picture,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.Picture=t),placeholder:i,onFocus:g,onBlur:E,onInput:p},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Nom *",modelValue:e.value.Name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.Name=t),rules:[s],required:""},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Prénom *",modelValue:e.value.Surname,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.Surname=t),rules:[s],required:""},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Lien Copie CI *",modelValue:e.value.CopyCI,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.CopyCI=t),rules:[s],required:""},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Expiration CI *",modelValue:e.value.ExpirationDateCI,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.ExpirationDateCI=t),type:"date"},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(R,{variant:"outlined",color:"primary",label:"Stagiaire *",modelValue:e.value.Intern,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.Intern=t)},null,8,["modelValue"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(j,{label:"Entreprise *",modelValue:e.value.enterprise,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.enterprise=t),items:P,"item-title":"name","item-value":"id",rules:[s],variant:"outlined",color:"primary"},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Email *",modelValue:e.value.Email,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.Email=t),rules:[s,b],required:""},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Téléphone *",modelValue:e.value.Phone,"onUpdate:modelValue":a[8]||(a[8]=t=>e.value.Phone=t),rules:[s,x],required:""},null,8,["modelValue","rules"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(n,{variant:"outlined",color:"primary",label:"Date de disponibilité *",modelValue:e.value.AvailabilityDate,"onUpdate:modelValue":a[9]||(a[9]=t=>e.value.AvailabilityDate=t),type:"date",rules:[I],required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),l(A,{class:"d-flex justify-end"},{default:o(()=>[l($,{color:"primary",onClick:w},{default:o(()=>a[11]||(a[11]=[v("Publier")])),_:1})]),_:1})]),_:1})]),_:1}))}}),K=f({__name:"add-consultant",setup(C){return(e,m)=>(V(),y(O))}});export{K as default};
