import{f as y,i,j as V,o as r,h as u,w as s,k as h,e as d,a1 as g,l as o,t as p,n as f,q as m,V as b}from"./index-C-LjzGTe.js";import{V as k,a as w,_ as x}from"./_plugin-vue_export-helper-BmXYExv4.js";import{V as C}from"./VSelect-ckf3Zc6x.js";import"./ssrBoot-DqN2j3fa.js";const T=["href"],A={key:1},j=y({__name:"TableProfile",setup(_){const n=i([]),l=i(null),c=i(""),v=i([{key:"jobTitle",title:"Titre du poste",align:"start"},{key:"experienceLevel",title:"Expérience",align:"start"},{key:"rateHour",title:"Tarif / heure",align:"end"},{key:"cv",title:"Lien CV",align:"center"},{key:"cvDate",title:"Date CV",align:"end"},{key:"skills",title:"Compétences",align:"start"},{key:"keywords",title:"Mots-clés",align:"start"}]);return V(async()=>{try{const a=await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/profil");if(!a.ok)throw new Error("Erreur lors de la récupération des profils");const e=await a.json();console.log("Données reçues :",e),n.value=Array.isArray(e)?e:[e]}catch(a){l.value=a instanceof Error?a.message:"Une erreur est survenue"}}),(a,e)=>(r(),u(b,null,{default:s(()=>[e[3]||(e[3]=h("h1",{class:"text-center mb-6"},"Liste des Profils",-1)),d(g,{to:"/add-profile",color:"primary",class:"mb-4"},{default:s(()=>e[1]||(e[1]=[o("Ajouter un profil")])),_:1}),l.value?(r(),u(k,{key:0,type:"error",variant:"outlined",class:"mb-4"},{default:s(()=>[o(p(l.value),1)]),_:1})):f("",!0),d(C,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),label:"Rechercher un profil","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-4"},null,8,["modelValue"]),d(w,{headers:v.value,items:n.value,search:c.value,"item-value":"consultantUuid",class:"elevation-2",dense:""},{"item.CV":s(({item:t})=>[t.CV?(r(),m("a",{key:0,href:t.CV,target:"_blank"},"Voir le CV",8,T)):(r(),m("span",A,"Non disponible"))]),"item.skills":s(({item:t})=>[o(p(t.skills&&t.skills.length?t.skills.join(", "):"Aucune compétence"),1)]),"item.keywords":s(({item:t})=>[o(p(t.keywords&&t.keywords.length?t.keywords.join(", "):"Aucun mot-clé"),1)]),_:1},8,["headers","items","search"]),!n.value.length&&!l.value?(r(),u(k,{key:1,type:"info",class:"mt-4"},{default:s(()=>e[2]||(e[2]=[o(" Aucun profil disponible. ")])),_:1})):f("",!0)]),_:1}))}}),B=x(j,[["__scopeId","data-v-930aa7d0"]]),U=y({__name:"table-profile",setup(_){return(n,l)=>(r(),u(B))}});export{U as default};
