import{d as p,r as n,ab as _,a as d,c,w as t,g as r,e as u,am as y,j as V,t as g,f as x,V as b,_ as C}from"./index-D0a4UNhJ.js";import{a as h,b as w,V as k}from"./VCard-CyYLA5Sn.js";import{V as T}from"./VForm-kq0ov4AK.js";import{V as A}from"./VTextField-BuR1o73f.js";import{V as I}from"./VAlert-96NR9Tuz.js";const S=p({__name:"LoginEnter",setup(f){const l=n(""),e=n(""),s=n(!1),m=_(),v=async()=>{e.value="",s.value=!0;try{const o=await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/api/validate-key",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:l.value})});if(!o.ok){e.value="Erreur lors de la validation de la clé API.";return}(await o.json()).valid===!0?(localStorage.setItem("apiKey",l.value),m.push("/consultant/list-consultant")):e.value="Clé API invalide"}catch(o){e.value="Erreur réseau. Veuillez réessayer.",console.error(o)}finally{s.value=!1}};return(o,a)=>(d(),c(b,{class:"fill-height d-flex justify-center align-center",fluid:""},{default:t(()=>[r(k,{elevation:"8","max-width":"500",class:"pa-8"},{default:t(()=>[r(h,{class:"text-h5 font-weight-bold text-primary"},{default:t(()=>a[1]||(a[1]=[u(" Authentification ")])),_:1}),r(w,null,{default:t(()=>[r(T,{onSubmit:y(v,["prevent"])},{default:t(()=>[r(A,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=i=>l.value=i),label:"Clé API",type:"password","prepend-inner-icon":"mdi-key",variant:"outlined",color:"primary",class:"mb-4 text-field-lg",rules:[i=>!!i||"Clé requise"],required:""},null,8,["modelValue","rules"]),r(V,{type:"submit",color:"primary",block:"",size:"large",loading:s.value},{default:t(()=>a[2]||(a[2]=[u(" Valider ")])),_:1},8,["loading"]),e.value?(d(),c(I,{key:0,type:"error",class:"mt-4",border:"start",variant:"tonal"},{default:t(()=>[u(g(e.value),1)]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}}),j=C(S,[["__scopeId","data-v-092cd1c6"]]),K=p({__name:"login",setup(f){return(l,e)=>(d(),c(j))}});export{K as default};
