import{h as c,j as V,v as C,o as p,i as m,w as a,f as r,n,t as T,q as U,V as g,a8 as w,a9 as P}from"./index-Bkgs0Zah.js";import{G as S}from"./GoBackBtn-Cd88gvsu.js";import{V as j}from"./VAlert-BxSA71N3.js";import{a as q,b as L,c as N,V as B}from"./VCard-DbOxVaLs.js";import{V as s,a as d}from"./VSelect-yJoDpOm4.js";import{V as D}from"./forwardRefs-DzoXtlxl.js";const I=c({__name:"UpdateProfile",setup(b){const i=localStorage.getItem("selectedProfile"),e=V(i?JSON.parse(i):{profileUuid:"",rateHour:null,cv:"",cvDate:"",jobTitle:"",experienceLevel:"",skills:[],keywords:[]});console.log("Profil après parsing :",e.value);const v=C(),f=["Junior","Medior","Senior"],x=["C#","ASP.NET","Vue.js","SQL"],y=["Backend","Frontend","API"],t=V(null),k=async()=>{if(t.value=null,!e.value.jobTitle||!e.value.cv||!e.value.cvDate||!e.value.experienceLevel){t.value="Veuillez remplir tous les champs obligatoires.";return}try{if(!(await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/profil",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.value)})).ok)throw new Error("Erreur lors de la mise à jour du profil");setTimeout(()=>{v.go(-1)},1e3)}catch(u){console.error(u instanceof Error?u.message:"Une erreur est survenue")}};return(u,l)=>(p(),m(g,null,{default:a(()=>[r(S),t.value?(p(),m(j,{key:0,closable:"",type:"error",variant:"outlined"},{default:a(()=>[n(T(t.value),1)]),_:1})):U("",!0),r(B,{class:"pa-4"},{default:a(()=>[r(q,null,{default:a(()=>l[8]||(l[8]=[n("Modifier Profil")])),_:1}),r(L,null,{default:a(()=>[r(s,{label:"Job Title*",modelValue:e.value.jobTitle,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.jobTitle=o),required:""},null,8,["modelValue"]),r(d,{label:"Niveau d'expérience",modelValue:e.value.experienceLevel,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.experienceLevel=o),items:f,required:""},null,8,["modelValue"]),r(s,{label:"Tarif / heure",modelValue:e.value.rateHour,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.rateHour=o),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"]),r(s,{label:"CV URL*",modelValue:e.value.cv,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.cv=o),required:""},null,8,["modelValue"]),r(s,{label:"Date CV*",modelValue:e.value.cvDate,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.cvDate=o),type:"datetime-local",required:""},null,8,["modelValue"]),r(d,{label:"Compétences",modelValue:e.value.skills,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.skills=o),items:x,multiple:"",required:""},null,8,["modelValue"]),r(d,{label:"Mots-clés",modelValue:e.value.keywords,"onUpdate:modelValue":l[6]||(l[6]=o=>e.value.keywords=o),items:y,multiple:"",required:""},null,8,["modelValue"])]),_:1}),r(N,null,{default:a(()=>[r(D,{color:"primary",onClick:l[7]||(l[7]=o=>k())},{default:a(()=>l[9]||(l[9]=[n("Publier")])),_:1})]),_:1})]),_:1})]),_:1}))}}),R=c({__name:"[profileUuid]",setup(b){const e=w().params.profileUuid;return(v,f)=>(p(),m(I,{profileId:P(e)},null,8,["profileId"]))}});export{R as default};
