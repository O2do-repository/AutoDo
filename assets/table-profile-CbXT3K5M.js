import{h as V,v as C,j as i,k as w,o,i as c,w as s,l as x,f as u,n as l,t as p,q as m,s as k,V as T,_ as A}from"./index-CjQAxy-L.js";import{b as y,V as j}from"./VSelect-B1Ofjcy2.js";import{V as v}from"./VAlert-IV44Bnfu.js";import{V as N}from"./VDataTable-C1pOGvB9.js";const P=["href"],$={key:1},B=V({__name:"TableProfile",setup(g){const f=C(),a=i([]),n=i(null),d=i(""),h=i([{key:"jobTitle",title:"Titre du poste",align:"start"},{key:"experienceLevel",title:"Expérience",align:"start"},{key:"rateHour",title:"Tarif / heure",align:"end"},{key:"cv",title:"Lien CV",align:"center"},{key:"cvDate",title:"Date CV",align:"end"},{key:"skills",title:"Compétences",align:"start"},{key:"keywords",title:"Mots-clés",align:"start"},{key:"actions",title:"Modifier",align:"center"}]),_=async()=>{try{const r=await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/profil");if(!r.ok)throw new Error("Erreur lors de la récupération des profils");const e=await r.json();console.log("Données reçues :",e),a.value=Array.isArray(e)?e:[e]}catch(r){n.value=r instanceof Error?r.message:"Une erreur est survenue"}},b=r=>{localStorage.setItem("selectedProfile",JSON.stringify(r)),f.push({path:`/edit-profile/${r.profileUuid}`})};return w(_),(r,e)=>(o(),c(T,null,{default:s(()=>[e[4]||(e[4]=x("h1",{class:"text-center mb-6"},"Liste des Profils",-1)),u(y,{onClick:e[0]||(e[0]=t=>r.$router.push("/add-profile")),color:"primary",class:"mb-4"},{default:s(()=>e[2]||(e[2]=[l("Ajouter un profil")])),_:1}),n.value?(o(),c(v,{key:0,type:"error",variant:"outlined",class:"mb-4"},{default:s(()=>[l(p(n.value),1)]),_:1})):m("",!0),u(j,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t),label:"Rechercher un profil","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-4"},null,8,["modelValue"]),u(N,{headers:h.value,items:a.value,search:d.value,"item-value":"consultantUuid",class:"elevation-2"},{"item.CV":s(({item:t})=>[t.CV?(o(),k("a",{key:0,href:t.CV,target:"_blank"},"Voir le CV",8,P)):(o(),k("span",$,"Non disponible"))]),"item.skills":s(({item:t})=>[l(p(t.skills&&t.skills.length?t.skills.join(", "):"Aucune compétence"),1)]),"item.keywords":s(({item:t})=>[l(p(t.keywords&&t.keywords.length?t.keywords.join(", "):"Aucun mot-clé"),1)]),"item.actions":s(({item:t})=>[u(y,{color:"primary",onClick:E=>b(t),icon:"mdi-pencil",density:"comfortable"},null,8,["onClick"])]),_:1},8,["headers","items","search"]),!a.value.length&&!n.value?(o(),c(v,{key:1,type:"info",class:"mt-4"},{default:s(()=>e[3]||(e[3]=[l(" Aucun profil disponible. ")])),_:1})):m("",!0)]),_:1}))}}),D=A(B,[["__scopeId","data-v-0e788dfb"]]),z=V({__name:"table-profile",setup(g){return(f,a)=>(o(),c(D))}});export{z as default};
