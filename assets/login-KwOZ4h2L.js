import{V as _,a as g,b as h}from"./VCard-BrM-c5wN.js";import{d as x,o as w,a as u,c as d,w as o,g as t,e as i,j as l,b,V as C,_ as V}from"./index-Db1Kzs80.js";import{V as k}from"./VBtn-CVfrJr_1.js";const B=x({__name:"LoginBtn",setup(m){const n="https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net",r=`${n}/user/me`;function f(){const s=`${n}/user/token`;window.location.href=`${n}/.auth/login/github?post_login_redirect_uri=${encodeURIComponent(s)}`}return w(async()=>{const e=new URLSearchParams(window.location.hash.split("?")[1]).get("token");e&&(localStorage.setItem("easyauth_token",e),window.location.hash="#/consultant/list-consultant");const c=localStorage.getItem("easyauth_token");if(c)try{const a=await fetch(r,{headers:{Authorization:`Bearer ${c}`}});if(a.status===401)return;const p=await a.json();console.log("Connecté :",p.login)}catch(a){console.error("Erreur de récupération utilisateur",a)}}),(s,e)=>(u(),d(C,{class:"fill-height d-flex align-center justify-center"},{default:o(()=>[t(_,{class:"pa-8",elevation:"12",rounded:"2xl","max-width":"400"},{default:o(()=>[t(g,{class:"text-h5 text-center mb-4"},{default:o(()=>e[0]||(e[0]=[i("Connexion")])),_:1}),t(h,{class:"text-center"},{default:o(()=>[t(l,{icon:"mdi-github",size:"56",color:"primary",class:"mb-4"}),e[2]||(e[2]=b("p",{class:"mb-6"}," Connecte-toi avec ton compte GitHub (membre O2do requis). ",-1)),t(k,{color:"primary",size:"large",rounded:"",onClick:f},{default:o(()=>[t(l,{start:"",icon:"mdi-login"}),e[1]||(e[1]=i(" Se connecter "))]),_:1})]),_:1})]),_:1})]),_:1}))}}),y={};function $(m,n){const r=B;return u(),d(r)}const U=V(y,[["render",$]]);export{U as default};
