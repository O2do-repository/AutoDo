import{d as _,an as g,o as x,a as l,c as u,w as r,g as t,e as c,j as i,b,V as C,_ as V}from"./index-BDDS9N35.js";import{V as h,a as w,b as y}from"./VCard-D7ry99aQ.js";import{V as B}from"./VBtn-DER43r04.js";const $=_({__name:"LoginBtn",setup(d){const a=g(),o="https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net",m=`${o}/user/me`;function f(){const n=window.location.href,e=`${o}/user/redirect?return_to=${encodeURIComponent(n)}`;window.location.href=`${o}/.auth/login/github?post_login_redirect_uri=${encodeURIComponent(e)}`}return x(async()=>{try{const s=await fetch(m,{credentials:"include"});if(s.status===401)return;const p=await s.json();console.log("Connecté :",p.login)}catch(s){console.error("Erreur de récupération utilisateur",s)}const n=a.query.login,e=a.query.email;n&&e&&console.log("Redirigé depuis Azure avec :",n,e)}),(n,e)=>(l(),u(C,{class:"fill-height d-flex align-center justify-center"},{default:r(()=>[t(h,{class:"pa-8",elevation:"12",rounded:"2xl","max-width":"400"},{default:r(()=>[t(w,{class:"text-h5 text-center mb-4"},{default:r(()=>e[0]||(e[0]=[c("Connexion")])),_:1}),t(y,{class:"text-center"},{default:r(()=>[t(i,{icon:"mdi-github",size:"56",color:"primary",class:"mb-4"}),e[2]||(e[2]=b("p",{class:"mb-6"}," Connecte-toi avec ton compte GitHub (membre O2do requis). ",-1)),t(B,{color:"primary",size:"large",rounded:"",onClick:f},{default:r(()=>[t(i,{start:"",icon:"mdi-login"}),e[1]||(e[1]=c(" Se connecter "))]),_:1})]),_:1})]),_:1})]),_:1}))}}),k={};function v(d,a){const o=$;return l(),u(o)}const R=V(k,[["render",v]]);export{R as default};
