import{b as B,V as G,c as S,f as I}from"./forwardRefs-zbunasKJ.js";import{q as R,u as N,O as _,Z as F,r as w,aa as J,a4 as K,J as T,T as O,y as M,z as P,g as d,a7 as H,ab as Z,ac as $,ad as Q,D as X,s as p,E as ee,ae as te,af as ae,I as C,N as ne,ag as oe,o as le,ah as se,x as re,ai as ie,aj as ce,ak as ue,al as ve,am as fe}from"./index-CzpLTRoi.js";import{e as me,f as de,g as ge,h as be}from"./VBtn-ONe13AlJ.js";const he=R({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...B({origin:"center center",scrollStrategy:"block",transition:{component:G},zIndex:2400})},"VDialog"),we=N()({name:"VDialog",props:he(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,u){let{emit:a,slots:t}=u;const v=_(e,"modelValue"),{scopeId:h}=F(),n=w();function g(o){var i,c;const s=o.relatedTarget,f=o.target;if(s!==f&&((i=n.value)!=null&&i.contentEl)&&((c=n.value)!=null&&c.globalTop)&&![document,n.value.contentEl].includes(f)&&!n.value.contentEl.contains(f)){const r=Z(n.value.contentEl);if(!r.length)return;const m=r[0],x=r[r.length-1];s===m?x.focus():m.focus()}}J(()=>{document.removeEventListener("focusin",g)}),K&&T(()=>v.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",g):document.removeEventListener("focusin",g)},{immediate:!0});function b(){var o;a("afterEnter"),(o=n.value)!=null&&o.contentEl&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function y(){a("afterLeave")}return T(v,async o=>{var s;o||(await O(),(s=n.value.activatorEl)==null||s.focus({preventScroll:!0}))}),M(()=>{const o=S.filterProps(e),s=P({"aria-haspopup":"dialog"},e.activatorProps),f=P({tabindex:-1},e.contentProps);return d(S,P({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:v.value,"onUpdate:modelValue":i=>v.value=i,"aria-modal":"true",activatorProps:s,contentProps:f,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:b,onAfterLeave:y},h),{activator:t.activator,default:function(){for(var i=arguments.length,c=new Array(i),r=0;r<i;r++)c[r]=arguments[r];return d(H,{root:"VDialog"},{default:()=>{var m;return[(m=t.default)==null?void 0:m.call(t,...c)]}})}})}),I({},n)}});function ye(e){const u=C(e());let a=-1;function t(){clearInterval(a)}function v(){t(),O(()=>u.value=e())}function h(n){const g=n?getComputedStyle(n):{transitionDuration:.2},b=parseFloat(g.transitionDuration)*1e3||200;if(t(),u.value<=0)return;const y=performance.now();a=window.setInterval(()=>{const o=performance.now()-y+b;u.value=Math.max(e()-o,0),u.value<=0&&t()},b)}return ce(t),{clear:t,time:u,start:h,reset:v}}const ke=R({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...me({location:"bottom"}),...de(),...$(),...Q(),...X(),...p(B({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Se=N()({name:"VSnackbar",props:ke(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:a}=u;const t=_(e,"modelValue"),{positionClasses:v}=ge(e),{scopeId:h}=F(),{themeClasses:n}=ee(e),{colorClasses:g,colorStyles:b,variantClasses:y}=te(e),{roundedClasses:o}=ae(e),s=ye(()=>Number(e.timeout)),f=w(),i=w(),c=C(!1),r=C(0),m=w(),x=ne(ue,void 0);oe(()=>!!x,()=>{const l=ve();fe(()=>{m.value=l.mainStyles.value})}),T(t,V),T(()=>e.timeout,V),le(()=>{t.value&&V()});let L=-1;function V(){s.reset(),window.clearTimeout(L);const l=Number(e.timeout);if(!t.value||l===-1)return;const k=se(i.value);s.start(k),L=window.setTimeout(()=>{t.value=!1},l)}function U(){s.reset(),window.clearTimeout(L)}function W(){c.value=!0,U()}function A(){c.value=!1,V()}function Y(l){r.value=l.touches[0].clientY}function j(l){Math.abs(r.value-l.changedTouches[0].clientY)>50&&(t.value=!1)}function z(){c.value&&A()}const q=re(()=>e.location.split(" ").reduce((l,k)=>(l[`v-snackbar--${k}`]=!0,l),{}));return M(()=>{const l=S.filterProps(e),k=!!(a.default||a.text||e.text);return d(S,P({ref:f,class:["v-snackbar",{"v-snackbar--active":t.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},q.value,v.value,e.class],style:[m.value,e.style]},l,{modelValue:t.value,"onUpdate:modelValue":E=>t.value=E,contentProps:P({class:["v-snackbar__wrapper",n.value,g.value,o.value,y.value],style:[b.value],onPointerenter:W,onPointerleave:A},l.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:Y,onTouchend:j,onAfterLeave:z},h),{default:()=>{var E,D;return[ie(!1,"v-snackbar"),e.timer&&!c.value&&d("div",{key:"timer",class:"v-snackbar__timer"},[d(be,{ref:i,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":s.time.value},null)]),k&&d("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((E=a.text)==null?void 0:E.call(a))??e.text,(D=a.default)==null?void 0:D.call(a)]),a.actions&&d(H,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[d("div",{class:"v-snackbar__actions"},[a.actions({isActive:t})])]})]},activator:a.activator})}),I({},f)}});export{we as V,Se as a};
