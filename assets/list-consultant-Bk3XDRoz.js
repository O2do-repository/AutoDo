import{h as k,j as m,v as E,k as j,_ as I,o as r,i as c,w as e,f as t,l as g,s as z,F as N,K as P,L as B,E as y,n as _,H as T,J as L,t as d,q as V,V as U}from"./index-BJ03CsVp.js";import{V as C,a as l}from"./VRow-DjRD9HHV.js";import{V as h,b as F}from"./VCard-8f-GiFw9.js";import{V as w,a as S}from"./VBtn-1MYAy1QJ.js";const A=k({name:"ConsultantGrid",setup(){const s=m([]),a=m(!1),u=m(null),v=E(),f="https://via.placeholder.com/150?text=No+Image",x=async()=>{a.value=!0;try{const n=await fetch("https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/consultant");if(!n.ok)throw new Error("Failed to fetch consultants");const i=await n.json();s.value=i}catch(n){u.value=n.message||"Unknown error"}finally{a.value=!1}},o=async n=>{try{if(!(await fetch(`https://autodo-fpe3azgvbvcxbgcx.westeurope-01.azurewebsites.net/consultant/${n}`,{method:"DELETE"})).ok)throw new Error("Erreur lors de la suppression");s.value=s.value.filter($=>$.consultantUuid!==n)}catch(i){console.error(i.message)}},p=n=>{sessionStorage.setItem("selectedConsultant",JSON.stringify(n)),v.push("/consultant/table-profile")},b=n=>{n.target.src=f};return j(()=>{x()}),{consultants:s,loading:a,error:u,deleteConsultant:o,goToConsultantProfiles:p,defaultImage:f,setPlaceholder:b}}}),D={class:"text-caption grey--text"};function J(s,a,u,v,f,x){return r(),c(U,null,{default:e(()=>[t(C,{justify:"center"},{default:e(()=>[t(l,{cols:"12",class:"text-center mb-6"},{default:e(()=>a[1]||(a[1]=[g("h2",{class:"purple--text"},"A perfect blend of genius and caffeine",-1)])),_:1}),(r(!0),z(N,null,P(s.consultants,o=>(r(),c(l,{key:o.consultantUuid,cols:"12",sm:"4",md:"2",class:"text-center"},{default:e(()=>[t(h,{class:"consultant-card",elevation:"3",onClick:p=>s.goToConsultantProfiles(o)},{default:e(()=>[t(w,{icon:"",size:"x-small",color:"red",class:"delete-btn",onClick:B(p=>s.deleteConsultant(o.consultantUuid),["stop"])},{default:e(()=>[t(y,null,{default:e(()=>a[2]||(a[2]=[_("mdi-close")])),_:1})]),_:2},1032,["onClick"]),t(F,{class:"d-flex flex-column align-center justify-center"},{default:e(()=>[t(T,{size:"150"},{default:e(()=>[t(L,{src:o.picture?o.picture:s.defaultImage,alt:"Photo Consultant",contain:""},null,8,["src"])]),_:2},1024),g("div",null,d(o.name)+" "+d(o.surname),1),g("div",D,d(o.email),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)),t(l,{cols:"12",sm:"4",md:"2",class:"text-center"},{default:e(()=>[t(h,{outlined:"",class:"consultant-card d-flex flex-column align-center justify-center"},{default:e(()=>[t(w,{onClick:a[0]||(a[0]=o=>s.$router.push("/consultant/add-consultant")),icon:"",color:"primary"},{default:e(()=>[t(y,{large:""},{default:e(()=>a[3]||(a[3]=[_("mdi-plus-circle")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.loading?(r(),c(C,{key:0,justify:"center"},{default:e(()=>[t(l,{cols:"12",class:"text-center"},{default:e(()=>[t(S,{indeterminate:"",color:"primary"})]),_:1})]),_:1})):V("",!0),s.error?(r(),c(C,{key:1,justify:"center"},{default:e(()=>[t(l,{cols:"12",class:"text-center red--text"},{default:e(()=>[_(d(s.error),1)]),_:1})]),_:1})):V("",!0)]),_:1})}const M=I(A,[["render",J],["__scopeId","data-v-b3a89c59"]]),K=k({__name:"list-consultant",setup(s){return(a,u)=>(r(),c(M))}});export{K as default};
